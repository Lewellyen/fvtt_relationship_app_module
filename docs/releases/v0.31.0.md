# Release Notes - Version 0.31.0

**Veröffentlichungsdatum:** 2025-11-24

## Hinzugefügt
- **Bootstrap-Services für Hook-Registrierung**: Neue DI-Services `BootstrapInitHookService` und `BootstrapReadyHookService` für die Registrierung der Foundry `init` und `ready` Hooks ([Details](src/framework/core/bootstrap-init-hook.ts), [Details](src/framework/core/bootstrap-ready-hook.ts))
- `BootstrapInitHookService`: Verantwortlich für die Registrierung des `init` Hooks und die gesamte Init-Phase-Logik (API-Exposition, Settings-Registrierung, Event-Registrierung, Logger-Konfiguration)
- `BootstrapReadyHookService`: Verantwortlich für die Registrierung des `ready` Hooks und die Ready-Phase-Logik
- Beide Services nutzen direkte `Hooks.on()` Aufrufe, um das Henne-Ei-Problem zu vermeiden (Version-Detection benötigt `game.version`, welches erst nach `init` verfügbar ist)
- Vollständige DI-Integration: Services werden als Singletons im Container registriert und über `bootstrapInitHookServiceToken` bzw. `bootstrapReadyHookServiceToken` verfügbar gemacht
- 100% Test-Coverage für beide Services

## Geändert
- **Bootstrap-Lifecycle-Refactoring**: Hook-Registrierung in `init-solid.ts` wurde in dedizierte DI-Services ausgelagert ([Details](src/framework/core/init-solid.ts))
- `initializeFoundryModule()` resolved jetzt die Bootstrap-Services aus dem Container und ruft deren `register()` Methoden auf
- Bessere Separation of Concerns: Init- und Ready-Phase-Logik ist jetzt in separaten Services gekapselt
- Verbesserte Testbarkeit: Services können isoliert getestet werden
- DI-konforme Architektur: Alle Dependencies werden über den Container injiziert
- **No-Ignores-Policy**: Bootstrap-Services zur Whitelist hinzugefügt ([Details](scripts/check-no-ignores.mjs))
- `bootstrap-init-hook.ts` und `bootstrap-ready-hook.ts` sind jetzt in der Whitelist für `v8 ignore` Marker
- Begründung: Foundry-spezifische Runtime-Umgebung und direkte Hooks.on() Nutzung zur Vermeidung des Henne-Ei-Problems

## Fehlerbehebungen
- **Test-Fixes**: Fehlgeschlagene Tests nach Bootstrap-Refactoring behoben
- `hooks-guard.test.ts`: Warnungstext angepasst (separate Warnungen für init/ready Hooks)
- `init-solid.test.ts`: Veralteten Test für Container-Resolution-Fehler entfernt (Logik ist jetzt im Service)
- Assertions für Service-Resolution-Fehler korrigiert
- **TypeScript-Fehler**: Doppelte Token-Imports in `core-services.config.ts` entfernt

## Bekannte Probleme
- Keine bekannten Probleme

## Upgrade-Hinweise
- Keine besonderen Maßnahmen erforderlich
