# Release Notes - Version 0.39.0

**Veröffentlichungsdatum:** 2025-11-29

## Hinzugefügt
- **Domain Cache Types**: Domain-eigene Cache-Typen für vollständige Entkopplung ([Details](src/domain/types/cache/cache-types.ts))
- `DomainCacheKey`, `DomainCacheSetOptions`, `DomainCacheEntryMetadata`, `DomainCacheLookupResult`, `DomainCacheStatistics`, `DomainCacheInvalidationPredicate`
- Ermöglicht Domain-Ports, unabhängig von Infrastructure-Implementierungen zu bleiben
- **JournalVisibilityConfig**: Konfigurations-Objekt für `JournalVisibilityService` ([Details](src/application/services/JournalVisibilityConfig.ts))
- Kapselt Infrastructure-Details (Module-Konstanten, Cache-Key-Factory) in injizierbares Config-Objekt
- Entkoppelt Application-Layer von Infrastructure-Details
- **Application Token-Struktur**: Neue Token-Organisation im Application-Layer ([Details](src/application/tokens/))
- `application.tokens.ts` - Application-Service-Tokens
- `domain-ports.tokens.ts` - Domain-Port-Tokens
- Verbessert Schichtentrennung zwischen Application und Infrastructure
- **Domain Result Utilities**: Result-Helper-Funktionen nach Domain-Layer verschoben ([Details](src/domain/utils/result.ts))
- Alle Result-Pattern-Utilities sind jetzt im Domain-Layer
- Infrastructure-Layer verwendet Re-Export für Rückwärtskompatibilität

## Geändert
- **DIP-Violations Refactoring**: Vollständige Eliminierung von drei identifizierten DIP-Verstößen ([Details](cursor-plan://22b8d9cb-a493-4444-854e-60d0ae8cd051/DIP-Violations-Refactoring.plan.md))
- **PlatformCachePort**: Verwendet nun Domain-eigene Cache-Typen statt Infrastructure-Typen
- **JournalVisibilityService**: Nutzt `JournalVisibilityConfig` statt direkter Infrastructure-Imports (`MODULE_CONSTANTS`, `createCacheNamespace`)
- **Application Use-Cases**: Verwenden Application-Layer-Tokens statt Infrastructure-Tokens
- **Result Helpers Migration**: Alle Result-Helper-Funktionen von Infrastructure nach Domain verschoben
- Import-Pfad geändert: `@/infrastructure/shared/utils/result` → `@/domain/utils/result`
- 112 Dateien aktualisiert (28 Application, 84 Infrastructure/Framework)
- Infrastructure-Layer bietet Re-Export für Rückwärtskompatibilität
- **Token-Organisation**: Domain-Port-Tokens und Application-Service-Tokens nach Application-Layer verschoben
- Neue Struktur: `src/application/tokens/` mit separaten Dateien für Domain-Ports und Application-Services
- Infrastructure re-exportiert Application-Tokens für Framework-Kompatibilität
- **CachePortAdapter**: Mapping-Logik zwischen Domain- und Infrastructure-Cache-Typen
- Alle Methoden verwenden Domain-Typen in Signatures
- Automatisches Mapping bei Aufrufen an Infrastructure-Layer
- **Coverage-Exclusions**: Type-only Dateien und Re-Export-Dateien von Coverage ausgeschlossen
- `JournalVisibilityConfig.ts`, `cache-types.ts`, `result.ts` (Re-Export), Token-Re-Export-Dateien
- Begründung: Nur Type-Definitionen, kein ausführbarer Code

## Fehlerbehebungen
- **Coverage-Gates**: 100% Coverage in allen Kategorien erreicht (Lines, Statements, Branches, Functions)
- Fehlende Tests für Error-Pfade in `dependencyconfig.ts` und `platform-cache-port-adapter.ts` hinzugefügt
- Test für `result.value === undefined` Branch in Cache-Port-Adapter hinzugefügt
- **TypeScript-Fehler**: `exactOptionalPropertyTypes`-Konformität in Cache-Port-Adapter
- Optionale Properties werden korrekt konstruiert (keine expliziten `undefined`-Werte)
- **Type-Safety**: `JournalVisibilityConfig` zu `ServiceType`-Union hinzugefügt
- Ermöglicht korrekte Registrierung im DI-Container

## Bekannte Probleme
- Keine bekannten Probleme

## Upgrade-Hinweise
- Keine besonderen Maßnahmen erforderlich
