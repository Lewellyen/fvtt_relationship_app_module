# Release Notes - Version 0.37.0

**Veröffentlichungsdatum:** 2025-11-26

## Hinzugefügt
- **ContextMenuRegistrationPort**: Domain-Port für Context-Menu-Callback-Registrierung ([Details](src/domain/ports/context-menu-registration-port.interface.ts))
- `addCallback()`: Registriert Callback für Context-Menu-Events
- `removeCallback()`: Entfernt Callback
- Platform-agnostisch, Foundry-Implementierung nutzt libWrapper intern
- **sanitize.ts**: Platform-agnostische HTML-Sanitization-Utilities ([Details](src/infrastructure/shared/utils/sanitize.ts))
- `sanitizeHtml()`: DOM-basierte HTML-Escape-Funktion
- `sanitizeId()`: Selector-sichere ID-Sanitization

## Geändert
- **RegisterContextMenuUseCase**: Nutzt jetzt `ContextMenuRegistrationPort` statt `JournalContextMenuLibWrapperService` ([Details](src/application/use-cases/register-context-menu.use-case.ts))
- DIP-konform: Application-Layer hängt nicht mehr von Infrastructure ab
- **HideJournalContextMenuHandler**: `FoundryGame`-Dependency entfernt ([Details](src/application/handlers/hide-journal-context-menu-handler.ts))
- Nutzt `JournalRepository.getById()` statt `FoundryGame.getJournalEntryById()`
- Vollständig platform-agnostisch
- **JournalVisibilityService**: Nutzt shared `sanitizeHtml` statt Foundry-Validation ([Details](src/application/services/JournalVisibilityService.ts))
- Import von `@/infrastructure/shared/utils/sanitize` statt `@/infrastructure/adapters/foundry/validation/schemas`
- **JournalContextMenuLibWrapperService**: Implementiert `ContextMenuRegistrationPort` ([Details](src/infrastructure/adapters/foundry/services/JournalContextMenuLibWrapperService.ts))

## Fehlerbehebungen
- Keine Einträge

## Bekannte Probleme
- Keine bekannten Probleme

## Upgrade-Hinweise
- Keine besonderen Maßnahmen erforderlich
